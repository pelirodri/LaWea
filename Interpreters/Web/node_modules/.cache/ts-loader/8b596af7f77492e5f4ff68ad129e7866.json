{"remainingRequest":"/Users/pelirodri/Documents/laweavuetesting/node_modules/thread-loader/dist/cjs.js!/Users/pelirodri/Documents/laweavuetesting/node_modules/ts-loader/index.js??ref--12-2!/Users/pelirodri/Documents/laweavuetesting/src/components/TheMainSection/TheMainSection.ts?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/pelirodri/Documents/laweavuetesting/src/components/TheMainSection/TheMainSection.ts","mtime":1567274949254},{"path":"/Users/pelirodri/Documents/laweavuetesting/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pelirodri/Documents/laweavuetesting/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pelirodri/Documents/laweavuetesting/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vue_property_decorator_1 = require(\"vue-property-decorator\");\nvar TheCodeEditor_vue_1 = require(\"../TheCodeEditor/TheCodeEditor.vue\");\nvar TheOutputManager_vue_1 = require(\"../TheOutputManager/TheOutputManager.vue\");\nvar TheInputManager_vue_1 = require(\"../TheInputManager/TheInputManager.vue\");\nvar TheErrorModal_vue_1 = require(\"../TheErrorModal/TheErrorModal.vue\");\nvar jquery_1 = require(\"jquery\");\nvar Command;\n(function (Command) {\n    Command[\"maric\\u00F3n\"] = \"maric\\u00F3n\";\n    Command[\"maraco\"] = \"maraco\";\n    Command[\"we\\u00F3n\"] = \"we\\u00F3n\";\n    Command[\"aweonao\"] = \"aweonao\";\n    Command[\"maraca\"] = \"maraca\";\n    Command[\"chucha\"] = \"chucha\";\n    Command[\"puta\"] = \"puta\";\n    Command[\"pichula\"] = \"pichula\";\n    Command[\"tula\"] = \"tula\";\n    Command[\"pico\"] = \"pico\";\n    Command[\"ctm\"] = \"ctm\";\n    Command[\"qu\\u00E9we\\u00E1\"] = \"qu\\u00E9we\\u00E1\";\n    Command[\"ch\\u00FApala\"] = \"ch\\u00FApala\";\n    Command[\"br\\u00EDgido\"] = \"br\\u00EDgido\";\n    Command[\"perkin\"] = \"perkin\";\n    Command[\"mierda\"] = \"mierda\";\n})(Command || (Command = {}));\nvar TheMainSection = /** @class */ (function (_super) {\n    __extends(TheMainSection, _super);\n    function TheMainSection() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.output = \"\";\n        _this.input = \"\";\n        _this.isInputDisabled = true;\n        _this.errorMessage = \"\";\n        return _this;\n    }\n    TheMainSection.prototype.interpretLaWeá = function (code) {\n        // console.log(\"Wtf\");\n        try {\n            var worker = new Worker(\"test.worker.js\");\n            worker.onmessage = function (e) {\n                console.log(e.data);\n            };\n            worker.postMessage(\"'Sup, motherfucker\");\n        }\n        catch (error) {\n            console.error(error);\n        }\n        this.output = this.input = \"\";\n        this.loopStartsLength = this.loopEndsLength = 0;\n        this.readCommandIndex = -1;\n        this.commands = [];\n        this.cells = [0n];\n        this.currentCell = 0;\n        this.isCopySet = false;\n        this.getCommands(code);\n        this.runCommands();\n    };\n    TheMainSection.prototype.getCommands = function (code) {\n        var commandName = \"\";\n        var line = 1, col = 1;\n        var isComment = false;\n        for (var i = 0; i <= code.length; i++) {\n            if (code[i] === \"#\") {\n                isComment = true;\n            }\n            if (i === code.length || code[i].match(/\\s/) || code[i] === \"#\") {\n                if (commandName.length) {\n                    var command = this.getCommand(commandName, line, col - commandName.length);\n                    if (!command) {\n                        this.exitInterpreter(\"'\" +\n                            commandName +\n                            \"'\" +\n                            \" no es un comando válido, po, saco de weas (línea: \" +\n                            String(line) +\n                            \", columna: \" +\n                            String(col - commandName.length) +\n                            \")\");\n                    }\n                    this.commands.push(command);\n                    commandName = \"\";\n                }\n            }\n            else {\n                if (!isComment) {\n                    if (!\"abcdeghiklmnopqrtuwáéíóú\".split(\"\").includes(code[i])) {\n                        this.exitInterpreter(\"'\" +\n                            code[i] +\n                            \"'\" +\n                            \" no es parte de La Weá, tonto qlo (línea: \" +\n                            String(line) +\n                            \", columna: \" +\n                            String(col) + \")\");\n                    }\n                    if (commandName.length === 7) {\n                        this.exitInterpreter(\"Voh creís q yo soy weón, ctm? Te gustan largos, parece (línea: \" +\n                            String(line) +\n                            \", columna: \" +\n                            String(col - commandName.length) +\n                            \")\");\n                    }\n                    commandName += code[i];\n                }\n            }\n            if (code[i] === \"\\n\") {\n                line++;\n                col = 0;\n                isComment = false;\n            }\n            else {\n                col++;\n            }\n        }\n        if (this.loopStartsLength !== this.loopEndsLength) {\n            this.exitInterpreter(\"O te sobran pichulas o te faltan tulas\");\n        }\n    };\n    TheMainSection.prototype.getCommand = function (commandName, line, col) {\n        if (Object.values(Command).includes(commandName)) {\n            if (commandName === Command.pichula) {\n                this.loopStartsLength++;\n            }\n            else if (commandName === Command.tula) {\n                if (this.loopEndsLength === this.loopStartsLength) {\n                    this.exitInterpreter(\"Se encontró una tula sin su respectiva pichula en la línea: \" +\n                        String(line) +\n                        \", columna: \" +\n                        String(col));\n                }\n                this.loopEndsLength++;\n            }\n            else if (commandName === Command.pico) {\n                if (this.loopStartsLength === this.loopEndsLength) {\n                    this.exitInterpreter(\"No debiste meter ese pico en la línea: \" +\n                        String(line) +\n                        \", columna: \" +\n                        String(col));\n                }\n            }\n            return commandName;\n        }\n        return null;\n    };\n    TheMainSection.prototype.runCommands = function () {\n        for (var i = this.readCommandIndex !== -1 ? this.readCommandIndex : 0; i < this.commands.length; i++) {\n            switch (this.commands[i]) {\n                case Command.maricón:\n                    this.cells[this.currentCell]--;\n                    break;\n                case Command.maraco:\n                    this.cells[this.currentCell] -= 2n;\n                    break;\n                case Command.weón:\n                    this.cells[this.currentCell]++;\n                    break;\n                case Command.aweonao:\n                    this.cells[this.currentCell] += 2n;\n                    break;\n                case Command.maraca:\n                    this.cells[this.currentCell] = 0n;\n                    break;\n                case Command.chucha:\n                    if (!this.currentCell) {\n                        this.exitInterpreter(\"Te saliste pa la izquierda, aweonao\");\n                    }\n                    this.currentCell--;\n                    break;\n                case Command.puta:\n                    if (++this.currentCell === this.cells.length) {\n                        this.cells[this.currentCell] = 0n;\n                    }\n                    break;\n                case Command.pichula:\n                    if (!this.cells[this.currentCell]) {\n                        i = this.findLoopEnd(this.commands, i);\n                    }\n                    break;\n                case Command.tula:\n                    if (this.cells[this.currentCell]) {\n                        i = this.findLoopStart(this.commands, i);\n                    }\n                    break;\n                case Command.pico:\n                    i = this.findLoopEnd(this.commands, i);\n                    break;\n                case Command.ctm:\n                    if (this.cells[this.currentCell] >= 0x0 && this.cells[this.currentCell] <= 0x10FFFF) {\n                        this.output += String.fromCodePoint(Number(this.cells[this.currentCell]));\n                        break;\n                    }\n                    else {\n                        this.output += \"?\";\n                    }\n                    break;\n                case Command.quéweá:\n                    if (this.readCommandIndex !== -1) {\n                        this.isInputDisabled = true;\n                        this.readCommandIndex = -1;\n                        if (this.input.length === 1 || this.input.length === 2) {\n                            var codePoint = this.input.codePointAt(0);\n                            if (this.input.length === 1 || codePoint >= 0x10000) {\n                                this.cells[this.currentCell] = BigInt(codePoint);\n                                break;\n                            }\n                        }\n                        this.cells[this.currentCell] = 0n;\n                    }\n                    else {\n                        this.isInputDisabled = false;\n                        this.readCommandIndex = i;\n                        return;\n                    }\n                    break;\n                case Command.chúpala:\n                    this.output += this.cells[this.currentCell].toString();\n                    break;\n                case Command.brígido:\n                    if (this.readCommandIndex !== -1) {\n                        this.isInputDisabled = true;\n                        this.readCommandIndex = -1;\n                        if (this.input.match(/^-?\\d{1,19}$/)) {\n                            var bigInput = BigInt(this.input);\n                            if (bigInput >= -9223372036854775808n && bigInput <= 9223372036854775807n) {\n                                this.cells[this.currentCell] = bigInput;\n                                break;\n                            }\n                        }\n                        this.cells[this.currentCell] = 0n;\n                    }\n                    else {\n                        this.isInputDisabled = false;\n                        this.readCommandIndex = i;\n                        return;\n                    }\n                    break;\n                case Command.perkin:\n                    if (this.isCopySet) {\n                        this.cells[this.currentCell] = this.cellValueCopy;\n                        this.isCopySet = false;\n                    }\n                    else {\n                        this.cellValueCopy = this.cells[this.currentCell];\n                        this.isCopySet = true;\n                    }\n                    break;\n                case Command.mierda:\n                    return;\n            }\n        }\n    };\n    TheMainSection.prototype.findLoopStart = function (commands, i) {\n        for (var j = i - 1, loopLevel = 1; j >= 0; j--) {\n            if (commands[j] === \"tula\") {\n                loopLevel++;\n            }\n            else if (commands[j] === \"pichula\") {\n                loopLevel--;\n            }\n            if (!loopLevel) {\n                return j;\n            }\n        }\n        return -1;\n    };\n    TheMainSection.prototype.findLoopEnd = function (commands, i) {\n        for (var j = i + 1, loopLevel = 1; j < commands.length; j++) {\n            if (commands[j] === \"pichula\") {\n                loopLevel++;\n            }\n            else if (commands[j] === \"tula\") {\n                loopLevel--;\n            }\n            if (!loopLevel) {\n                return j;\n            }\n        }\n        return -1;\n    };\n    TheMainSection.prototype.exitInterpreter = function (errorMessage) {\n        this.errorMessage = errorMessage;\n        jquery_1.default(\"#error-modal\").modal();\n        throw new Error(errorMessage);\n    };\n    TheMainSection = __decorate([\n        vue_property_decorator_1.Component({\n            components: {\n                TheCodeEditor: TheCodeEditor_vue_1.default,\n                TheOutputManager: TheOutputManager_vue_1.default,\n                TheInputManager: TheInputManager_vue_1.default,\n                TheErrorModal: TheErrorModal_vue_1.default\n            }\n        })\n    ], TheMainSection);\n    return TheMainSection;\n}(vue_property_decorator_1.Vue));\nexports.default = TheMainSection;\n",null]}